# WebShark: 軽量ネットワークパケット可視化ツール

## 1. はじめに
`WebShark` は Linux ゲートウェイ上で動作するリアルタイムのパケット解析・可視化ツールである。Rust 製の単一バイナリとして提供され、ブラウザからアクセスするだけで利用できる。バックエンドでは Wireshark の `tshark` を用い、取得したパケット情報を WebSocket 経由で配信する。

## 2. システム構成
WebShark は Web サーバ部とパケットキャプチャ部から構成される。Web サーバは `axum` を用いて実装され、静的ファイルの配信と WebSocket 通信を担当する。パケットキャプチャ部では `tokio` の非同期プロセスとして `tshark` を起動し、出力を解析して統計情報を蓄積する。

## 3. 主な機能
1. **リアルタイム表示**: パケット情報を 1 秒ごとにバッチ化して gzip 圧縮し、ブラウザへ送信する。
2. **柔軟なフィルタ**: API を通じて `tshark` のフィルタ文字列を変更できる。
3. **統計機能**: プロトコル別および送受信先別のパケット数を集計する。
4. **簡易導入**: Wireshark のインストールと本バイナリの配置のみで動作する。

## 4. 実装について
メインループは `tokio` ベースで非同期に動作し、パケット情報は JSON 形式でやり取りされる。クライアント側では JavaScript によりデータを可視化する。通信量削減のため、WebSocket 送信時に gzip 圧縮を行う。ユニットテストでは `parse_tshark_line` など解析処理を検証している。

## 5. おわりに
本プロジェクトはネットワークトラフィックを手軽に把握したいというニーズに応えるもので、ブラウザさえあれば利用できる点が特徴である。今後は UI の改善や追加統計の実装を進め、より使いやすいツールを目指す。
